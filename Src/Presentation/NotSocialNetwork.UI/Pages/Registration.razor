@inject HttpClient Http
@page "/Registration"
@using System.IO
@using System.Net.Mime

<link href="/css/RegistrationStyles.css" rel="stylesheet">

<div class="TitleContainer">
    <span>
        Регистрация
    </span>
</div>
<!--Enter action and model reference here-->
<EditForm Model="user" OnValidSubmit="@SendNewUser"
          action="#" class="main-container-form">
    <div class="form-container">
        <InputText @bind-Value="user.Name" 
                   class="form-container--input" placeholder="Никнейм" />
    </div>
    <div class="form-container">
        <InputText @bind-Value="user.Email" 
                   type="Email" class="form-container--input" placeholder="Email" />
    </div>
    <div class="form-container">
        <InputDate TValue="DateTimeOffset" @bind-Value="user.DateOfBirth"
               placeholder="Ваш день рождения"
               class="form-container--input" />
    </div>
    <div class="form-container">
        <button type="submit" class="form-container--submitButton">
            Зарегистрироваться
        </button>
    </div>
</EditForm>

@code{
    UserEntity user = new();

    async Task SendNewUser()
    {
        await Http.PostAsJsonAsync<UserEntity>("https://localhost:44353/api/User", user);
    }
}
